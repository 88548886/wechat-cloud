#!/bin/bash

cd `dirname $0`/..;

# 检验参数 -- 必须传入 dev | prod | test 来选择运行环境
if [ ! -n "$1" ] ;then
     echo "you must choose a environment,please enter a choose [dev | prod | test] "
     exit 1;
else
     echo "the environment you choose is [$1]"
fi

bin/deploy.sh $1
if [ `echo $?` = 0  ];then
   echo "*********************************************************"
   echo "*************************** 更新打包成功  ***************"
   echo "*********************************************************"
else
  echo "*********************************************************"
  echo "*************************** 更新打包失败  ***************"
  echo "*********************************************************"
  exit 1
fi

bin/shutdown.sh
if [ `echo $?` = 0  ];then
   echo "*********************************************************"
   echo "*************************** 程序关闭成功  ***************"
   echo "*********************************************************"
else
  echo "**********************************************************"
  echo "**************************** 程序关闭失败  ***************"
  echo "**********************************************************"
  exit 1
fi
bin/startup.sh $1

if [ `echo $?` = 0  ];then
  echo "************************************************************"
  echo "***************************程序启动成功！！！***************"
  echo "************************************************************"
else
  echo "**************************************************************"
  echo "***************************程序启动失败！！！ ****************"
  echo "**************************************************************"
  exit 1
fi